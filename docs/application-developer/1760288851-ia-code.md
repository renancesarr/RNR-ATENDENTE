## 1. Contexto consumido
- `docs/application-developer/README.md` ✅
- `docs/application-developer/pre-flight.md` ✅
- `docs/application-developer/context-index.md` ✅
- `docs/application-developer/1760288751-ia-code.md` ✅
- `docs/project-manager/github_issues_backlog_T001-T150.md` ✅
- `db/migrations/0002_base_schema.sql` ✅

## 2. Objetivo da alteração
Criar tabelas de fatos (`fact_conversation`, `fact_response`, `fact_lead`) conforme tarefa T-037.

## 3. Decisões e justificativas
- Separar métricas de conversa (TTFR, contagens) em `fact_conversation`, consolidar tempos de resposta em `fact_response` e eventos de conversão em `fact_lead`.
- Garantir integridade referencial com `ON DELETE CASCADE` para `chats` e índices úteis para relatórios.
- Reutilizar função `set_updated_at` para manter `updated_at` sincronizado nas tabelas que exigem histórico.

## 4. Implementação
- Arquivos tocados: `db/migrations/0003_fact_tables.sql`, `docs/application-developer/pre-flight.md`.
- Estratégia de testes/validação: aplicar migrações em ambiente local e conferir schema (não executado aqui).

## 5. Pontos que precisam de revisão humana
Validar se campos adicionais (ex.: `origin_channel`, `lead_stage`) são necessários antes de construir dashboards.

## 6. Follow-ups recomendados
- Criar views/calculations para KPIs (T-041, T-042).
- Alimentar as tabelas via consumers e rotinas de ETL.
