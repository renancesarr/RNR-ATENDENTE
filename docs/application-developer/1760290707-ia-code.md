## 1. Contexto consumido
- `docs/application-developer/README.md` ✅
- `docs/application-developer/pre-flight.md` ✅
- `docs/application-developer/context-index.md` ✅
- `docs/application-developer/1760290496-ia-code.md` ✅
- `docs/decisions/ADR-002.md` ✅
- `docs/data_dictionary.md` ✅
- `db/migrations/0002-0012.sql` (estado atual) ✅

## 2. Objetivo da alteração
Criar esquema RAG com tabelas `rag_sources`, `rag_documents`, `rag_embeddings` atendendo à tarefa T-051.

## 3. Decisões e justificativas
- `rag_sources` centraliza origem e metadados; `rag_documents` mantém conteúdo completo e checksum; `rag_embeddings` contém chunks com vetor `vector(1536)` (compatível com `text-embedding-3-small`).
- Índices e constraints garantem deduplicação (`checksum`, `(document_id, chunk_index)`) e permitem filtros por metadados.

## 4. Implementação
- Arquivos tocados: `db/migrations/0013_rag_schema.sql`, `docs/application-developer/pre-flight.md`.
- Estratégia de testes/validação: aplicar migração e verificar criação; para vetores, rodar `SELECT embedding <=> embedding` após ingestão.

## 5. Pontos que precisam de revisão humana
Confirmar dimensão do vetor caso modelo mude; avaliar outras colunas (ex.: `tenant_id`).

## 6. Follow-ups recomendados
- Implementar pipeline de ingestão (consumidores) e atualizar dicionário de dados conforme novos campos.
