## 1. Contexto consumido
- `docs/application-developer/README.md` ✅
- `docs/application-developer/pre-flight.md` ✅
- `docs/application-developer/1760289956-ia-code.md` ✅
- `db/migrations/0003_fact_tables.sql` ✅
- `db/tests/fact_integrity.sql` ✅
- `docs/project-manager/github_issues_backlog_T001-T150.md` ✅

## 2. Objetivo da alteração
Disponibilizar testes SQL de integridade dos fatos (`fact_conversation`, `fact_response`, `fact_lead`) conforme tarefa T-048.

## 3. Decisões e justificativas
- `db/tests/fact_integrity.sql` utiliza bloco PL/pgSQL para lançar exceções quando há violações (FKs ausentes, contagens negativas, inconsistências de quote).
- `tools/test-facts.sh` executa o script via Docker, permitindo integração em CI/manual.
- Documentação `docs/application-developer/fact-tests.md` orienta execução e cobertura.

## 4. Implementação
- Arquivos tocados: `db/tests/fact_integrity.sql`, `tools/test-facts.sh`, `docs/application-developer/fact-tests.md`, `docs/application-developer/pre-flight.md`.
- Estratégia de testes/validação: executar o script após popular dados. Caso não haja linhas inconsistentes, nenhuma exceção é levantada.

## 5. Pontos que precisam de revisão humana
Adicionar cenários adicionais (ex.: checar fact_lead vs fact_conversation) conforme novos requisitos.

## 6. Follow-ups recomendados
- Integrar script ao pipeline de CI quando implementado.
