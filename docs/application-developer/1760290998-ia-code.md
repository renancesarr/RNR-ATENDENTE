## 1. Contexto consumido
- `docs/application-developer/README.md` ✅
- `docs/application-developer/pre-flight.md` ✅
- `docs/application-developer/context-index.md` ✅
- `docs/application-developer/1760290829-ia-code.md` ✅
- `docs/data_dictionary.md` ✅
- `db/migrations/0013_rag_schema.sql` ✅

## 2. Objetivo da alteração
Adicionar versionamento para fontes RAG (`rag_documents`) conforme tarefa T-053.

## 3. Decisões e justificativas
- Migração `0014_rag_versioning.sql` adiciona coluna `revision` e cria tabela `rag_document_revisions` para armazenar revisões anteriores.
- Trigger `rag_documents_versioning` insere automaticamente snapshot antes de atualizar o documento (quando checksum muda).

## 4. Implementação
- Arquivos tocados: `db/migrations/0014_rag_versioning.sql`, `docs/data_dictionary.md`, `docs/application-developer/pre-flight.md`.
- Estratégia de testes/validação: atualizar documento existente e verificar histórico registrado em `rag_document_revisions`.

## 5. Pontos que precisam de revisão humana
Confirmar se precisamos versionar também embeddings antigos ou apenas conteúdo.

## 6. Follow-ups recomendados
- Ajustar CLI de ingestão para registrar metadados adicionais nas revisões (ex.: operador, motivo).
