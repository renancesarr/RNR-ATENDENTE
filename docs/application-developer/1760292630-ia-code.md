## 1. Contexto consumido
- `docs/application-developer/README.md` ✅
- `docs/application-developer/pre-flight.md` ✅
- `docs/application-developer/context-index.md` ✅
- `docs/application-developer/1760292492-ia-code.md` ✅
- `docs/application-developer/message-windows.md` ✅
- `db/migrations/0017_chat_windows.sql` ✅

## 2. Objetivo da alteração
Agrupar conversas por janela configurável, conforme tarefa T-061.

## 3. Decisões e justificativas
- Função `fn_message_windows` calcula janelas por `chat_id`, criando novo grupo quando intervalo entre mensagens excede X minutos.
- View `chat_windows` expõe agrupamento com 30 minutos padrão.
- Testes SQL validam comportamento com dados sintéticos.

## 4. Implementação
- Arquivos tocados: `db/migrations/0017_chat_windows.sql`, `db/tests/chat_windows.sql`, `docs/application-developer/message-windows.md`, `docs/application-developer/pre-flight.md`.
- Estratégia de testes/validação: script `chat_windows.sql` garante criação de duas janelas quando intervalo > 30min.

## 5. Pontos que precisam de revisão humana
- Ajustar função caso precisemos agrupar por `contact_id` diretamente ou considerar múltiplos canais.

## 6. Follow-ups recomendados
- Integrar função ao processo de ingestão (criação automática de `chats`) e adicionar métricas por janela.
