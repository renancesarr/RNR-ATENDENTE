## 1. Contexto consumido
- `docs/application-developer/README.md` ✅
- `docs/application-developer/pre-flight.md` ✅
- `docs/application-developer/context-index.md` ✅
- `docs/application-developer/1760289822-ia-code.md` ✅
- `docs/application-developer/retention-hard-delete.md` ✅
- `db/migrations/0010_audit_retention.sql` ✅

## 2. Objetivo da alteração
Implementar job de limpeza hard-delete com suporte a dry-run (tarefa T-047).

## 3. Decisões e justificativas
- Função `fn_apply_retention_purge()` elimina dados correlatos (messages, facts, event_log, chats, contacts) conforme política e retorna relatório.
- Script `tools/purge-retention.sh` expõe execução com `--dry-run` (default) ou `--apply`.
- Documentação `docs/application-developer/retention-hard-delete.md` formaliza uso e recomendações de segurança.

## 4. Implementação
- Arquivos tocados: `db/migrations/0012_retention_purge.sql`, `tools/purge-retention.sh`, `docs/application-developer/retention-hard-delete.md`, `docs/application-developer/pre-flight.md`.
- Estratégia de testes/validação: executar função em ambiente de teste e revisar contagens antes de aplicar (não executado aqui).

## 5. Pontos que precisam de revisão humana
- Avaliar performance da função com volume grande; ajustar para processar em lotes se necessário.

## 6. Follow-ups recomendados
- Criar tabela `audit_retention_log` para registrar execuções.
- Integrar job a cron com notificações e backups.
