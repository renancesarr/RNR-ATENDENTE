#=========== Evolution API v2 ===========#
# Auth & segurança
AUTHENTICATION_API_KEY=change-me-in-production

# Flags de banco de dados (PostgreSQL)
DATABASE_ENABLED=true
DATABASE_PROVIDER=postgresql
DATABASE_CONNECTION_URI=postgresql://${POSTGRES_APP_USER}:${POSTGRES_APP_PASSWORD}@postgres:5432/${POSTGRES_APP_DB}?schema=public
DATABASE_CONNECTION_CLIENT_NAME=evolution_exchange
DATABASE_SAVE_DATA_INSTANCE=true
DATABASE_SAVE_DATA_NEW_MESSAGE=true
DATABASE_SAVE_MESSAGE_UPDATE=true
DATABASE_SAVE_DATA_CONTACTS=true
DATABASE_SAVE_DATA_CHATS=true
DATABASE_SAVE_DATA_LABELS=true
DATABASE_SAVE_DATA_HISTORIC=true

# Cache Redis
CACHE_REDIS_ENABLED=true
CACHE_REDIS_URI=redis://redis:6379/6
CACHE_REDIS_PREFIX_KEY=evolution
CACHE_REDIS_SAVE_INSTANCES=false
CACHE_LOCAL_ENABLED=false

# RabbitMQ (eventos globais)
RABBITMQ_ENABLED=true
RABBITMQ_URI=amqp://${RABBITMQ_DEFAULT_USER}:${RABBITMQ_DEFAULT_PASS}@rabbitmq:5672/${RABBITMQ_DEFAULT_VHOST}
RABBITMQ_EXCHANGE_NAME=evolution_exchange
RABBITMQ_GLOBAL_ENABLED=true
RABBITMQ_EVENTS_MESSAGES_SET=true
RABBITMQ_EVENTS_MESSAGES_UPSERT=true
RABBITMQ_EVENTS_SEND_MESSAGE=true

# Integrações
TYPEBOT_API_VERSION=latest
OPENAI_ENABLED=true
# Outros bots (Chatwoot, Dify, etc.) permanecem desabilitados por padrão.

# Debounce e comportamento padrão (ajustável via API)
DEFAULT_DEBOUNCE_TIME_SECONDS=30

# Portas expostas
EVOLUTION_PROXY_HTTP_PORT=8088
EVOLUTION_PROXY_WS_PORT=8089
EVOLUTION_HEALTHCHECK_PATH=/


#=========== PostgreSQL principal (Evolution API) ===========#
POSTGRES_DB=evolution
POSTGRES_PASSWORD=replace-with-strong-password
POSTGRES_APP_USER=evolution_app
POSTGRES_APP_PASSWORD=replace-with-strong-password
POSTGRES_APP_DB=evolution


#=========== Redis ===========#
# Sem variáveis adicionais necessárias para este compose.


#=========== RabbitMQ ===========#
RABBITMQ_DEFAULT_USER=admin
RABBITMQ_DEFAULT_PASS=admin
RABBITMQ_DEFAULT_VHOST=default
RABBITMQ_MANAGEMENT_PORT=15672
RABBITMQ_AMQP_PORT=5672


#=========== Typebot Self-Hosted ===========#
TYPEBOT_POSTGRES_DB=typebot
TYPEBOT_POSTGRES_PASSWORD=replace-with-strong-password
TYPEBOT_BUILDER_PORT=8081
TYPEBOT_VIEWER_PORT=8082

# Conexão do Typebot DB
PGHOST=typebot-db
PGDATABASE=${TYPEBOT_POSTGRES_DB}
PGUSER=postgres
PGPASSWORD=${TYPEBOT_POSTGRES_PASSWORD}

# Credenciais Typebot
SECRET_KEY=generate-32-char-secret-key
ADMIN_EMAIL=admin@example.com
DEFAULT_WORKSPACE_PLAN=UNLIMITED


#=========== OpenAI (cadastrado via API) ===========#
# As chaves reais não devem ser commitadas; cadastrar via endpoint seguro.
# OPENAI_API_KEY ficará armazenada no cofre e registrada via Evolution API.
OPENAI_API_KEY=__inject-via-secrets__
OPENAI_API_BASE=https://api.openai.com


#=========== Watchtower (opcional) ===========#
WATCHTOWER_SCHEDULE=0 0 4 * * *
# Ajuste se quiser alterar a frequência de verificação de updates.
